<section class="bg-gray-50 dark:bg-dark-mode">
  <div class="flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0">
    <a class="flex items-center mb-6 text-2xl font-semibold text-gray-900 dark:text-white">
      <svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 3200.000000 3200.000000" xmlns="http://www.w3.org/2000/svg" class="fill-current text-black dark:text-white w-16 h-16">
        <g transform="translate(0.000000,3200.000000) scale(0.100000,-0.100000)">
          <path d="M12782 24605 c-115 -21 -210 -53 -312 -106 -282 -145 -473 -385 -562-706 -21 -75 -22 -99 -26 -604 l-3 -527 43 8 c106 20 308 41 478 50 498 26 1025 -51 1515 -224 l129 -46 1457 0 c921 0 1495 -4 1560 -10 1143 -113 2120-849 2543 -1915 142 -359 208 -711 209 -1110 0 -443 -79 -823 -254 -1224 -391
            -893 -1211 -1560 -2160 -1755 -264 -55 -317 -59 -890 -63 l-537 -5 -83 -140 c-205 -349 -449 -651 -764 -945 -572 -537 -1301 -902 -2085 -1047 -277 -51-401 -61 -760 -61 -184 0 -350 3 -367 7 l-33 8 0 -2304 c0 -2531 -4 -2378 61
            -2562 133 -381 477 -662 875 -715 514 -68 1010 240 1174 731 57 171 54 0 57 2532 l3 2327 1523 4 c1616 4 1596 3 1942 53 1454 208 2765 1035 3585 2260 475 711 749 1456 851 2317 26 219 37 713 20 937 -86 1149 -516 2187 -1266 3055
            -137 159 -429 446 -585 576 -567 472 -1207 814 -1900 1014 -296 85 -555 136-930 182 -121 15 -357 17 -2285 19 -1758 2 -2163 0 -2223 -11z"
          />
          <path d="M12346 22300 c-59 -5 -166 -16 -237 -25 l-128 -17 -10 -32 c-40 -124-19 -224 93 -451 111 -224 168 -309 290 -431 84 -84 115 -108 186 -142 122-60 191 -75 340 -75 271 1 473 55 1072 284 368 141 473 185 551 231 87 51 87
            46 -5 105 -445 287 -978 477 -1508 538 -166 19 -497 27 -644 15z"
          />
          <path d="M11230 22039 c-226 -94 -497 -244 -688 -380 -429 -308 -801 -720 -1046 -1161 l-37 -67 66 -69 c142 -151 342 -210 615 -183 510 52 1084 276 1362 531 86 79 162 191 189 282 20 65 21 86 16 232 -10 277 -67 475 -186 656
            -42 64 -168 200 -185 199 -6 0 -54 -18 -106 -40z"
          />
          <path d="M14795 21239 c-287 -87 -608 -194 -762 -255 -778 -306 -891 -644 -383 -1144 197 -195 516 -422 771 -549 266 -133 460 -175 628 -136 131 31 212 95 312 247 215 326 344 786 300 1068 -13 81 -53 155 -184 340 -132 187 -410
            501 -441 499 -6 0 -114 -32 -241 -70z"
          />
          <path d="M10755 19969 c-177 -23 -399 -94 -530 -171 -204 -119 -317 -258 -376-460 -33 -113 -38 -355 -11 -513 37 -212 100 -379 193 -508 384 -531 812 -807
            1174 -756 341 47 558 360 674 969 33 175 54 405 48 510 -16 246 -116 451 -312 639 -146 139 -303 225 -504 277 -101 26 -219 30 -356 13z"
          />
          <path d="M15942 19572 c-80 -111 -186 -324 -213 -427 -60 -235 -17 -468 110-595 53 -53 165 -113 232 -125 l36 -7 6 44 c26 186 15 553 -24 817 -20 142
            -66 361 -77 373 -4 4 -35 -32 -70 -80z"
          />
          <path d="M12989 19479 c-404 -59 -703 -533 -785 -1245 -23 -194 -15 -496 15-609 56 -215 186 -382 363 -469 136 -67 223 -87 408 -93 227 -8 459 32 720
            122 582 202 844 547 800 1055 -12 134 -31 203 -84 315 -57 119 -126 213 -244 336 -282 294 -669 524 -983 584 -88 16 -123 17 -210 4z"
          />
          <path d="M9176 18535 c-41 -14 -102 -67 -111 -96 -4 -10 1 -73 10 -141 86 -641 345 -1244 761 -1765 149 -186 555 -573 602 -573 8 0 51 19 95 42 159 82
            277 231 328 413 29 105 32 272 5 360 -67 222 -180 344 -694 749 -350 276 -462 400 -682 756 -157 256 -205 294 -314 255z"
          />
          <path d="M15816 17779 c-155 -22 -273 -123 -366 -314 -84 -172 -117 -362 -99 -569 9 -101 32 -226 48 -254 10 -18 41 21 154 193 97 148 172 284 250 453 79
            169 189 475 176 486 -11 9 -111 12 -163 5z"
          />
          <path d="M14557 17140 c-50 -13 -100 -39 -209 -111 -317 -208 -670 -341 -1104 -414 -215 -36 -352 -78 -453 -137 -79 -46 -201 -171 -233 -238 -119 -249 -12
            -542 329 -900 68 -72 91 -90 113 -90 48 0 315 48 444 80 140 34 368 109 501 164 147 62 420 204 487 256 154 116 331 334 412 503 140 295 143 604 8 782
            -65 86 -191 131 -295 105z"
          />
          <path d="M11415 15953 c-110 -15 -249 -71 -351 -141 -67 -45 -181 -147 -174 -155 11 -11 255 -129 332 -161 304 -126 713 -229 1002 -252 87 -7 89 -7 75 13
            -240 332 -284 388 -389 493 -178 179 -302 230 -495 203z"
          />
          <path d="M18569 13839 c-100 -14 -437 -38 -714 -50 -308 -13 -1412 -16 -1860 -5 l-300 7 2010 -2009 c1106 -1105 2071 -2062 2145 -2128 951 -842 1745 -1275 2275 -1241 601 39 1049 536 1022 1132 -22 469 -338 867 -787 990 -132 37 -156
            48 -310 149 -224 147 -519 378 -775 607 -66 59 -671 659 -1345 1333 l-1225 1226 -40 -1 c-22 -1 -65 -5 -96 -10z"
          />
        </g>
      </svg>
      Remontada
    </a>
    <div class="w-full bg-white dark:bg-[#3b4153] rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700 ">
      <div class="p-6 space-y-4 md:space-y-6 sm:p-8 dark:text-white">
        <div (click)="signInWithProvider()" class="flex flex-row justify-center items-center space-x-3">
          <button class="flex items-center justify-center text-purple-700 hover:text-white border border-purple-700 hover:bg-purple-800 focus:ring-4 focus:outline-none focus:ring-purple-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-purple-400 dark:text-purple-400 dark:hover:text-white dark:hover:bg-purple-500 dark:focus:ring-purple-900 transition duration-150">
            <img alt="google logo" class="w-6 h-6 mr-2" loading="lazy" src="https://www.svgrepo.com/show/475656/google-color.svg">
            <span>Sign up with Google</span>
          </button>
        </div>
        <div class="flex items-center justify-center space-x-2 dark:text-white">
          <span class="h-px w-44 bg-[#3b4153] dark:bg-white"></span>
          <span class="text-gray-300 font-normal">or</span>
          <span class="h-px w-44 bg-[#3b4153] dark:bg-white"></span>
        </div>
        <h1 class="text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white">
          Create an account
        </h1>
        <form (ngSubmit)="onRegister()" [formGroup]="registerForm" class="space-y-4 md:space-y-6" action="#">
          <!--Email field-->
          <div class="mb-6">
            <label for="registerEmail" class="block mb-2 text-sm font-medium"
                   [class.text-green-700]="registerForm.controls['email'].valid && registerForm.controls['email'].touched"
                   [class.text-red-700]="registerForm.controls['email'].invalid && registerForm.controls['email'].touched"
                   [class.dark:text-green-500]="registerForm.controls['email'].valid && registerForm.controls['email'].touched"
                   [class.dark:text-red-500]="registerForm.controls['email'].invalid && registerForm.controls['email'].touched">
              Your email
            </label>

            <!-- Input container with relative positioning -->
            <div class="relative">
              <!-- Icon -->
              <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
                <svg class="w-4 h-4 text-gray-500 dark:text-black" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 16">
                  <path d="m10.036 8.278 9.258-7.79A1.979 1.979 0 0 0 18 0H2A1.987 1.987 0 0 0 .641.541l9.395 7.737Z"/>
                  <path d="M11.241 9.817c-.36.275-.801.425-1.255.427-.428 0-.845-.138-1.187-.395L0 2.6V14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2.5l-8.759 7.317Z"/>
                </svg>
              </div>

              <!-- Email Input -->
              <input type="email" name="email" id="registerEmail"
                     [class.bg-green-50]="registerForm.controls['email'].valid && registerForm.controls['email'].touched"
                     [class.bg-red-50]="registerForm.controls['email'].invalid && registerForm.controls['email'].touched"
                     [class.border-green-500]="registerForm.controls['email'].valid && registerForm.controls['email'].touched"
                     [class.border-red-500]="registerForm.controls['email'].invalid && registerForm.controls['email'].touched"
                     [class.text-green-900]="registerForm.controls['email'].valid && registerForm.controls['email'].touched"
                     [class.text-red-900]="registerForm.controls['email'].invalid && registerForm.controls['email'].touched"
                     class="border text-sm text-black rounded-lg focus:ring focus:ring-purple-600 focus:border-purple-600 block w-full pl-10 p-2.5 dark:bg-gray-700"
                     formControlName="email" placeholder="name@company.com">
            </div>
            <!-- Validation Message -->
            <p class="mt-2 text-sm"
               [class.text-green-600]="registerForm.controls['email'].valid && registerForm.controls['email'].touched"
               [class.text-red-600]="registerForm.controls['email'].invalid && registerForm.controls['email'].touched"
               [class.dark:text-green-500]="registerForm.controls['email'].valid && registerForm.controls['email'].touched"
               [class.dark:text-red-500]="registerForm.controls['email'].invalid && registerForm.controls['email'].touched">
              <span class="font-medium" *ngIf="registerForm.controls['email'].valid && registerForm.controls['email'].touched">Well done!</span>
              <span *ngIf="registerForm.controls['email'].invalid && registerForm.controls['email'].touched">
                <span *ngIf="registerForm.controls['email'].errors?.['required']">Email is required.</span>
                <span *ngIf="registerForm.controls['email'].errors?.['email']">Please enter a valid email.</span>
                <span *ngIf="registerForm.controls['email'].errors?.['minlength']">Email must be at least 5 characters long.</span>
                <span *ngIf="registerForm.controls['email'].errors?.['emailExists']">Email is already in use!</span>
              </span>
            </p>
          </div>

          <!--Password field-->
          <div class="mb-6">
            <label for="registerPassword" class="block mb-2 text-sm font-medium"
                   [class.text-green-700]="registerForm.controls['password'].valid && registerForm.controls['password'].touched"
                   [class.text-red-700]="registerForm.controls['password'].invalid && registerForm.controls['password'].touched"
                   [class.dark:text-green-500]="registerForm.controls['password'].valid && registerForm.controls['password'].touched"
                   [class.dark:text-red-500]="registerForm.controls['password'].invalid && registerForm.controls['password'].touched">
              Password
            </label>
            <div class="relative">
              <!-- Icon -->
              <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
                <svg class="w-4 h-4 text-gray-800 dark:text-black" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 20">
                  <path d="M14 7h-1.5V4.5a4.5 4.5 0 1 0-9 0V7H2a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Zm-5 8a1 1 0 1 1-2 0v-3a1 1 0 1 1 2 0v3Zm1.5-8h-5V4.5a2.5 2.5 0 1 1 5 0V7Z"/>
                </svg>
              </div>
              <!-- Password Input -->
              <input type="password" name="password" id="registerPassword"
                     [class.bg-green-50]="registerForm.controls['password'].valid && registerForm.controls['password'].touched"
                     [class.bg-red-50]="registerForm.controls['password'].invalid && registerForm.controls['password'].touched"
                     [class.border-green-500]="registerForm.controls['password'].valid && registerForm.controls['password'].touched"
                     [class.border-red-500]="registerForm.controls['password'].invalid && registerForm.controls['password'].touched"
                     [class.text-green-900]="registerForm.controls['password'].valid && registerForm.controls['password'].touched"
                     [class.text-red-900]="registerForm.controls['password'].invalid && registerForm.controls['password'].touched"
                     class="border text-sm text-black rounded-lg focus:ring focus:ring-purple-600 focus:border-purple-600 block w-full pl-10 p-2.5 dark:bg-gray-700"
                     formControlName="password" placeholder="••••••••">
            </div>
            <p class="mt-2 text-sm"
               [class.text-green-600]="registerForm.controls['password'].valid && registerForm.controls['password'].touched"
               [class.text-red-600]="registerForm.controls['password'].invalid && registerForm.controls['password'].touched"
               [class.dark:text-green-500]="registerForm.controls['password'].valid && registerForm.controls['password'].touched"
               [class.dark:text-red-500]="registerForm.controls['password'].invalid && registerForm.controls['password'].touched">
              <span class="font-medium" *ngIf="registerForm.controls['password'].valid && registerForm.controls['password'].touched">Well done!</span>
              <span *ngIf="registerForm.controls['password'].invalid && registerForm.controls['password'].touched">
                <span *ngIf="registerForm.controls['password'].errors?.['required']">Password is required.</span>
                <span *ngIf="registerForm.controls['password'].errors?.['minlength']">Password must be at least 8 characters long.</span>
                <span *ngIf="registerForm.controls['password'].errors?.['pattern']">Password must contain at least 1 uppercase letter, 1 lowercase letter, and 1 number.</span>
              </span>
            </p>
          </div>
          <!--Confirm password-->
          <div class="mb-6">
            <label for="registerConfirmPassword" class="block mb-2 text-sm font-medium"
                   [class.text-green-700]="registerForm.controls['confirmPassword'].valid && registerForm.controls['confirmPassword'].touched"
                   [class.text-red-700]="registerForm.controls['confirmPassword'].invalid && registerForm.controls['confirmPassword'].touched"
                   [class.dark:text-green-500]="registerForm.controls['confirmPassword'].valid && registerForm.controls['confirmPassword'].touched"
                   [class.dark:text-red-500]="registerForm.controls['confirmPassword'].invalid && registerForm.controls['confirmPassword'].touched">
              Confirm password
            </label>
            <div class="relative">
              <!-- Icon -->
              <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
                <svg class="w-4 h-4 text-gray-800 dark:text-black" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 20">
                  <path d="M14 7h-1.5V4.5a4.5 4.5 0 1 0-9 0V7H2a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Zm-5 8a1 1 0 1 1-2 0v-3a1 1 0 1 1 2 0v3Zm1.5-8h-5V4.5a2.5 2.5 0 1 1 5 0V7Z"/>
                </svg>
              </div>
              <!-- Password Input -->
              <input type="password" name="confirm-password" id="registerConfirmPassword"
                     [class.bg-green-50]="registerForm.controls['confirmPassword'].valid && registerForm.controls['confirmPassword'].touched"
                     [class.bg-red-50]="registerForm.controls['confirmPassword'].invalid && registerForm.controls['confirmPassword'].touched"
                     [class.border-green-500]="registerForm.controls['confirmPassword'].valid && registerForm.controls['confirmPassword'].touched"
                     [class.border-red-500]="registerForm.controls['confirmPassword'].invalid && registerForm.controls['confirmPassword'].touched"
                     [class.text-green-900]="registerForm.controls['confirmPassword'].valid && registerForm.controls['confirmPassword'].touched"
                     [class.text-red-900]="registerForm.controls['confirmPassword'].invalid && registerForm.controls['confirmPassword'].touched"
                     class="border text-sm text-black rounded-lg focus:ring focus:ring-purple-600 focus:border-purple-600 block w-full pl-10 p-2.5 dark:bg-gray-700"
                     formControlName="confirmPassword" placeholder="••••••••">
            </div>
            <p class="mt-2 text-sm"
               [class.text-green-600]="registerForm.controls['confirmPassword'].valid && registerForm.controls['confirmPassword'].touched"
               [class.text-red-600]="registerForm.controls['confirmPassword'].invalid && registerForm.controls['confirmPassword'].touched"
               [class.dark:text-green-500]="registerForm.controls['confirmPassword'].valid && registerForm.controls['confirmPassword'].touched"
               [class.dark:text-red-500]="registerForm.controls['confirmPassword'].invalid && registerForm.controls['confirmPassword'].touched">
              <span class="font-medium" *ngIf="registerForm.controls['confirmPassword'].valid && !registerForm.errors?.['mismatchedPasswords'] && registerForm.controls['confirmPassword'].touched">Well done!</span>
              <span *ngIf="registerForm.controls['confirmPassword'].invalid && registerForm.controls['confirmPassword'].touched">
                <span *ngIf="registerForm.controls['confirmPassword'].errors?.['required']">Password confirmation is required.</span>
                <span *ngIf="registerForm.errors?.['mismatchedPasswords'] && registerForm.controls['confirmPassword'].touched">Passwords do not match.</span>
                <span *ngIf="registerForm.controls['confirmPassword'].valid && !registerForm.errors?.['mismatchedPasswords'] && registerForm.controls['confirmPassword'].touched">Passwords match.</span>
              </span>
            </p>
          </div>
          <!--Terms and conditions-->
          <div class="flex items-start">
            <div class="flex items-center h-5">
              <input id="terms" aria-describedby="terms" type="checkbox" (change)="termsAcceptedChange()" class="w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-primary-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-primary-600 dark:ring-offset-gray-800" required>
            </div>
            <div class="ml-3 text-sm">
              <label for="terms" class="text-sm text-gray-600 dark:text-white">I accept the <a (click)="openTCModal()" class="cursor-pointer text-purple-600 hover:text-purple-700 hover:underline font-medium">Terms and Conditions</a></label>
            </div>
          </div>
          <button [disabled]="loading || !termsAccepted"
                  [class.opacity-50]="loading || !termsAccepted"
                  class="w-full focus:outline-none text-white bg-purple-700 hover:bg-purple-800 focus:ring-4 focus:ring-purple-300 font-medium rounded-lg text-sm px-5 py-2.5 mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900"
                  type="submit">
            {{ loading ? 'Loading...' : 'Create your account' }}
          </button>
          <p class="text-sm text-gray-600 dark:text-white">
            Already have an account? <a href="/login" class="text-purple-600 hover:text-purple-700 hover:underline font-medium">Login here</a>
          </p>
        </form>
      </div>
    </div>
  </div>
</section>
<app-custom-alert [message]="alertMessage" [show]="showAlert"></app-custom-alert>
